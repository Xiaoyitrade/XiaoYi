## 汇率网格交易产品说明文档

### 初始化汇率网格必填参数，举例ETH/BTC汇率交易对
#### 需用户设置的参数：（也就是说开启网格功能只需设置格子数量参数即可）
1. 最小汇率值 - 0.025    // 即网格下限， 对应我们的开仓条件
2. 最大汇率值 - 0.0275   // 即网格上限， 对应我们的清仓条件
3. 最大仓位价值 - 1000U   // 用户自己设置
4. 格子数量 - 5          // 用户自己设置

#### 无需用户设置，通过计算得出的数据：
5. 每格汇率差 - 0.0005    // (最大汇率值 - 最小汇率值) / 格子数量 = 0.0005
6. 每格利润率 - 1.9%      // 2 * 每格汇率差 / (最小汇率值 + 最大汇率值) = 0.01904761904
7. 每格资金占用 - 200U    // 最大仓位价值 / 格子数量 = 200, 此值一定要大于单笔最小下单额（Binance BTC最小单就110u了），最好是2倍以上，否则可能会来回开单，迅速将本金磨损光

(建议设置最小单小一点，比如10-20U这样会滑点会更低，因为网格交易不需要抢单，有足够时间吃满一个格子)

#### 网格布局
0.0275 ------------  网格上限 \
            第1格\
0.0270 ------------\
            第2格\
0.0265 ------------\
            第3格\
0.0260 ------------\
            第4格\
0.0255 ------------\
            第5格\
0.0250 ------------  网格下限

### 初始建仓行为, 原地仅开其上方一个格子仓位
假设网格启动时汇率为0.026111，刚好落在第3格，我们会买满第2格，占用总资金20%

0.0275 ------------  网格上限\
            第1格 - 空仓\
0.0270 ------------\
            第2格 - 满仓，均价0.02611\
0.0265 ------------\
            第3格 - 空仓       \
0.0260 ------------\
            第4格 - 空仓\
0.0255 ------------\
            第5格 - 空仓\
0.0250 ------------  网格下限

### 买入卖出时机
买入时机一定是位于某格子下边缘以下（已超出此格子）才买入此格子，比如第一个格子，一定是0.027以下才买入
卖出时机一定是位于某格子上边缘以上（已超出此格子）买卖出此格子，比如第一个格子，一定是0.0275以上才卖出
实时汇率会上下游动，假设我们当前格子索引是N，我们只做两件事：
1. 判断当前格子N下方一个格子，即索引N+1的格子，若满仓则清仓；空仓则无事发生
2. 判断当前格子N上方一个格子，即索引N-1的格子，若空仓则买入；满仓则无事发生
注意：单边上涨行情会出现几乎同时买卖情况发生，这不是BUG，其实是换仓

### 格子状态：
已买入：买入均价
空仓：
注意：某个格子买/卖出去一部分，那么状态不要更新，保持之前的状态，必须买/卖全部格子价值才算完成，才可以更新状态。

### 利润统计：
每当格子由满仓状态变为空仓状态时统计此格利润，并记录一条利润数据。 
